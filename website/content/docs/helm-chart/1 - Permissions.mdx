---
title: Permissions
id: permissions
---

# Permissions

The GoKubeDownscaler needs certain permissions to scale workloads.

If [constrainedDownscaler][constrainedDownscaler] is set to true the Helm Chart will create roles for each namespace defined in [constrainedNamespaces][constrainedNamespaces].

Otherwise it will always create a cluster role.

::::info

## Default Permissions

By default the GoKubeDownscaler will always have the following permissions if it is installed via our Helm Chart:

```yaml
- apiGroups:
    - ""
  resources:
    - pods
    - namespaces
  verbs:
    - get
    - watch
    - list
- apiGroups:
    - ""
  resources:
    - events
  verbs:
    - get
    - create
    - watch
    - list
    - update
    - patch
```

These are necessary for the GoKubeDownscaler to work properly.

:::note
If you are using a clusterwide installation of the GoKubeDownscaler it will also have:
:::

```yaml
- apiGroups:
    - constraints.gatekeeper.sh
  resources:
    - kubedownscalerjobsconstraint
  verbs:
    - get
    - create
    - watch
    - list
    - update
    - patch
    - delete
- apiGroups:
    - kyverno.io
  resources:
    - policies
  resourceNames:
    - kube-downscaler-jobs-policy
  verbs:
    - get
    - create
    - watch
    - list
    - update
    - patch
    - delete
- apiGroups:
    - kyverno.io
  resources:
    - policies
  verbs:
    - get
    - create
    - watch
    - list
- apiGroups:
    - templates.gatekeeper.sh
  resources:
    - constrainttemplate
  verbs:
    - create
    - get
    - list
    - watch
- apiGroups:
    - apiextensions.k8s.io
  resources:
    - customresourcedefinitions
  verbs:
    - create
    - get
    - list
    - watch
```

TODO Explain why these are added.

::::

Otherwise the GoKubeDownscaler assigns permissions depending on the resources defined in [includedResources][includedResources].

This will add the following permissions:

## Deployments

```yaml
- apiGroups:
    - apps
  resources:
    - deployments
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Statefulsets

```yaml
- apiGroups:
    - apps
  resources:
    - statefulsets
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Daemonsets

```yaml
- apiGroups:
    - apps
  resources:
    - daemonsets
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Rollouts

```yaml
- apiGroups:
    - argoproj.io
  resources:
    - rollouts
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## HorizontalPodAutoscalers

```yaml
- apiGroups:
    - autoscaling
  resources:
    - horizontalpodautoscalers
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Jobs

```yaml
- apiGroups:
    - batch
  resources:
    - jobs
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Cronjobs

```yaml
- apiGroups:
    - batch
  resources:
    - cronjobs
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Scaledobjects

```yaml
- apiGroups:
    - keda.sh
  resources:
    - scaledobjects
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Stacks

```yaml
- apiGroups:
    - zalando.org
  resources:
    - stacks
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## Prometheuses

```yaml
- apiGroups:
    - monitoring.coreos.com
  resources:
    - prometheuses
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```

## PodDisruptionBudgets

```yaml
- apiGroups:
    - policy
  resources:
    - poddisruptionbudgets
  verbs:
    - get
    - watch
    - list
    - update
    - patch
```
